{% extends "layouts/base.twig" %}

{% block title %}O Meu Perfil{% endblock %}

{% block content %}
<div class="profile-container">
    <h2>O Meu Perfil</h2>

    {% for msg in flash %}
        <div class="alert alert-{{ msg.tipo }}">{{ msg.mensagem }}</div>
    {% endfor %}

    <p><strong>Nome:</strong> {{ user.nome }}</p>
    <p><strong>Email:</strong> {{ user.email }}</p>

    <hr>

    <h3>Autenticação 2FA</h3>

    {% if user.two_factor_ativo %}
        <p>2FA está <strong>ativado</strong>.</p>
        <form method="post" action="/2fa/desativar">
            <input type="hidden" name="_csrf" value="{{ csrf }}">
            <button class="btn btn-danger">Desativar 2FA</button>
        </form>
    {% else %}
        <p>2FA está <strong>desativado</strong>.</p>
        <a href="/2fa/setup" class="btn btn-primary">Ativar 2FA</a>
    {% endif %}
</div>
{% endblock %}